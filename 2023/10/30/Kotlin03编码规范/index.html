

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="ssubin">
  <meta name="keywords" content="">
  
    <meta name="description" content="编码规范众所周知且易于遵循的编码规范对于任何编程语言都至关重要。 在这里，我们为使用 Kotlin 的项目提供关于代码风格与代码组织的准则。 在 IDE 中配置风格两个最流行的 Kotlin IDE——IntelliJ IDEA 与 Android Studio 都为代码风格提供了强大的支持。 可以将它们配置为根据指定的代码风格自动格式化代码。 应用风格指南 转到 Settings&#x2F;Pr">
<meta property="og:type" content="article">
<meta property="og:title" content="Kotlin编码规范">
<meta property="og:url" content="http://example.com/2023/10/30/Kotlin03%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/index.html">
<meta property="og:site_name" content="ssubin">
<meta property="og:description" content="编码规范众所周知且易于遵循的编码规范对于任何编程语言都至关重要。 在这里，我们为使用 Kotlin 的项目提供关于代码风格与代码组织的准则。 在 IDE 中配置风格两个最流行的 Kotlin IDE——IntelliJ IDEA 与 Android Studio 都为代码风格提供了强大的支持。 可以将它们配置为根据指定的代码风格自动格式化代码。 应用风格指南 转到 Settings&#x2F;Pr">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-10-30T08:44:37.000Z">
<meta property="article:modified_time" content="2023-11-01T08:06:41.326Z">
<meta property="article:author" content="ssubin">
<meta property="article:tag" content="Kotlin">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Kotlin编码规范 - ssubin</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"CxAzwCX8p3wID71bmqRMZkW4-gzGzoHsz","app_key":"7oaNRDSXMMvMPwS453YPtfH9","server_url":"https://cxazwcx8.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', '');
        });
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>ssubin</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Kotlin编码规范"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-10-30 16:44" pubdate>
          2023年10月30日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          15k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          129 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Kotlin编码规范</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="编码规范"><a href="#编码规范" class="headerlink" title="编码规范"></a>编码规范</h1><p>众所周知且易于遵循的编码规范对于任何编程语言都至关重要。 在这里，我们为使用 Kotlin 的项目提供关于代码风格与代码组织的准则。</p>
<h2 id="在-IDE-中配置风格"><a href="#在-IDE-中配置风格" class="headerlink" title="在 IDE 中配置风格"></a>在 IDE 中配置风格</h2><p>两个最流行的 Kotlin IDE——<a target="_blank" rel="noopener" href="https://www.jetbrains.com/idea/">IntelliJ IDEA</a> 与 <a target="_blank" rel="noopener" href="https://developer.android.com/studio/">Android Studio</a> 都为代码风格提供了强大的支持。 可以将它们配置为根据指定的代码风格自动格式化代码。</p>
<h3 id="应用风格指南"><a href="#应用风格指南" class="headerlink" title="应用风格指南"></a>应用风格指南</h3><ol>
<li>转到 <strong>Settings&#x2F;Preferences | Editor | Code Style | Kotlin</strong>。</li>
<li>点击 **Set from…**。</li>
<li>选择 <strong>Kotlin style guide</strong> 。</li>
</ol>
<h3 id="验证代码是否遵循风格指南"><a href="#验证代码是否遵循风格指南" class="headerlink" title="验证代码是否遵循风格指南"></a>验证代码是否遵循风格指南</h3><ol>
<li>转到 <strong>Settings&#x2F;Preferences | Editor | Inspections | General</strong>。</li>
<li>打开 <strong>Incorrect formatting</strong> 探查项。 默认启用验证样式指南中描述的其他问题（例如命名约定）的附加探查项。</li>
</ol>
<h2 id="源代码组织"><a href="#源代码组织" class="headerlink" title="源代码组织"></a>源代码组织</h2><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p>在纯 Kotlin 项目中，推荐的目录结构遵循省略了公共根包的包结构。例如，如果项目中的所有代码都位于 <code>org.example.kotlin</code> 包及其子包中，那么 <code>org.example.kotlin</code> 包的文件应该直接放在源代码根目录下，而 <code>org.example.kotlin.network.socket</code> 中的文件应该放在源代码根目录下的 <code>network/socket</code> 子目录中。</p>
<blockquote>
<p>对于 JVM 平台：Kotlin 源文件应当与 Java 源文件位于同一源文件根目录下， 并遵循相同的目录结构（每个文件应存储在与其 package 语句对应的目录中。</p>
<p><svg width="24" height="24" fill="#4dbb5f" viewBox="0 0 24 24"><path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path></svg></p>
</blockquote>
<h3 id="源文件名称"><a href="#源文件名称" class="headerlink" title="源文件名称"></a>源文件名称</h3><p>如果 Kotlin 文件包含单个类或接口（以及可能相关的顶层声明），那么文件名应该与该类的名称相同，并追加 <code>.kt</code> 扩展名。 这适用于所有类型的类和接口。 如果文件包含多个类或只包含顶层声明， 那么选择一个描述该文件所包含内容的名称，并以此命名该文件。 使用首字母大写的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%A7%9D%E5%B3%B0%E5%BC%8F%E5%A4%A7%E5%B0%8F%E5%AF%AB">驼峰风格</a>（也称为 Pascal 风格）， 例如 <code>ProcessDeclarations.kt</code>。</p>
<p>文件的名称应该描述文件中代码的作用。因此，应避免在文件名中使用诸如 <code>Util</code> 之类的无意义词语。</p>
<h4 id="多平台项目"><a href="#多平台项目" class="headerlink" title="多平台项目"></a>多平台项目</h4><p>在多平台项目中，平台特有的源代码集中包含顶层声明的文件应具有与该源代码集名称相关联的后缀。 例如：</p>
<ul>
<li><strong>jvm</strong>Main&#x2F;kotlin&#x2F;Platform.<strong>jvm</strong>.kt</li>
<li><strong>android</strong>Main&#x2F;kotlin&#x2F;Platform.<strong>android</strong>.kt</li>
<li><strong>ios</strong>Main&#x2F;kotlin&#x2F;Platform.<strong>ios</strong>.kt</li>
</ul>
<p>对于公共源代码集，包含顶层声明的文件不应该有后缀。 例如，<code>commonMain/kotlin/Platform.kt</code>.</p>
<h5 id="技术细节"><a href="#技术细节" class="headerlink" title="技术细节"></a>技术细节</h5><p>由于 JVM 的限制〔不允许顶层成员（函数、属性）〕，我们建议在多平台项目中遵循这种文件命名方案。</p>
<p>为了解决 JVM 的这个问题，Kotlin JVM 编译器会创建包含顶层成员声明的包装类〔所谓的 “文件门面”（file facades）〕。 文件门面有一个源自文件名的内部名称。</p>
<p>另外，JVM 不允许多个类具有相同的完整限定名称 (FQN，fully qualified name)。 这可能会导致 Kotlin 项目无法编译到 JVM 的情况：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">root<br>|- commonMain<span class="hljs-regexp">/kotlin/my</span><span class="hljs-keyword">Package</span><span class="hljs-regexp">/Platform.kt /</span>/ 包含 <span class="hljs-string">&#x27;fun count() &#123; &#125;&#x27;</span><br>|- jvmMain<span class="hljs-regexp">/kotlin/my</span><span class="hljs-keyword">Package</span><span class="hljs-regexp">/Platform.kt /</span>/ 包含 <span class="hljs-string">&#x27;fun multiply() &#123; &#125;&#x27;</span><br></code></pre></td></tr></table></figure>

<p>这里两个 <code>Platform.kt</code> 文件都在同一个包中，因此 Kotlin JVM 编译器生成两个文件门面，它们都有 FQN <code>myPackage.PlatformKt</code>。 这就会产生 “Duplicate JVM classes”（“重复的 JVM 类”）错误。</p>
<p>避免这种情况的最简单的方式就是按照上述指南重命名其中一个文件。 这种命名方案有助于避免冲突，同时保持代码的可读性。</p>
<blockquote>
<p>对于以下两种情，上述建议可能看起来多余，但我们仍然建议遵循之：</p>
<ul>
<li><p>非 JVM 平台不存在重复文件门面的问题。 但是，这种命名方案有助于保持文件命名的一致性。</p>
</li>
<li><p>在 JVM 中，如果源文件没有顶层声明就不会生成文件门面，也就不会遇到命名冲突。</p>
<p>但是，这种命名方案有助于避免简单的重构或添加可能包含顶层函数并同样导致 “Duplicate JVM classes”（“重复 JVM 类”错误）的情况。</p>
</li>
</ul>
<p><svg width="24" height="24" fill="rgba(25,25,28,0.7)" viewBox="0 0 24 24"><circle cx="12.042" cy="4" r="2"></circle><path d="M18.339 7a6.982 6.982 0 0 0-6.3 4 6.982 6.982 0 0 0-6.3-4H3v10h2.739a6.983 6.983 0 0 1 6.3 4 6.582 6.582 0 0 1 6-4.033h2.994L21 7z"></path></svg></p>
</blockquote>
<h3 id="源文件组织"><a href="#源文件组织" class="headerlink" title="源文件组织"></a>源文件组织</h3><p>鼓励多个声明（类、顶级函数或者属性）放在同一个 Kotlin 源文件中， 只要这些声明在语义上彼此紧密关联，并且文件保持合理大小 （不超过几百行）。</p>
<p>特别是在为类定义与类的所有客户都相关的扩展函数时， 请将它们放在与类自身相同的地方。而在定义仅对指定客户有意义的扩展函数时，请将它们放在紧挨该客户代码之后。避免只是为了保存 某个类的所有扩展函数而创建文件。</p>
<h3 id="类布局"><a href="#类布局" class="headerlink" title="类布局"></a>类布局</h3><p>一个类的内容应按以下顺序排列：</p>
<ol>
<li>属性声明与初始化块</li>
<li>次构造函数</li>
<li>方法声明</li>
<li>伴生对象</li>
</ol>
<p>不要按字母顺序或者可见性对方法声明排序，也不要将常规方法与扩展方法分开。而是要把相关的东西放在一起，这样从上到下阅读类的人就能够跟进所发生事情的逻辑。选择一个顺序（高级别优先，或者相反）并坚持下去。</p>
<p>将嵌套类放在紧挨使用这些类的代码之后。如果打算在外部使用嵌套类，而且类中并没有引用这些类，那么把它们放到末尾，在伴生对象之后。</p>
<h3 id="接口实现布局"><a href="#接口实现布局" class="headerlink" title="接口实现布局"></a>接口实现布局</h3><p>在实现一个接口时，实现成员的顺序应该与该接口的成员顺序相同（如果需要， 还要插入用于实现的额外的私有方法）。</p>
<h3 id="重载布局"><a href="#重载布局" class="headerlink" title="重载布局"></a>重载布局</h3><p>在类中总是将重载放在一起。</p>
<h2 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h2><p>在 Kotlin 中，包名与类名的命名规则非常简单：</p>
<ul>
<li>包的名称总是小写且不使用下划线（<code>org.example.project</code>）。 通常不鼓励使用多个词的名称，但是如果确实需要使用多个词，可以将它们连接在一起或使用驼峰风格（<code>org.example.myProject</code>）。</li>
<li>类与对象的名称以大写字母开头并使用驼峰风格：</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeclarationProcessor</span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><br><span class="hljs-keyword">object</span> EmptyDeclarationProcessor : DeclarationProcessor() &#123; <span class="hljs-comment">/*……*/</span> &#125;<br></code></pre></td></tr></table></figure>

<h3 id="函数名"><a href="#函数名" class="headerlink" title="函数名"></a>函数名</h3><p>函数、属性与局部变量的名称以小写字母开头、使用驼峰风格而不使用下划线：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processDeclarations</span><span class="hljs-params">()</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><span class="hljs-keyword">var</span> declarationCount = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<p>例外：用于创建类实例的工厂函数可以与抽象返回类型具有相同的名称：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Foo</span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FooImpl</span> : <span class="hljs-type">Foo</span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Foo</span><span class="hljs-params">()</span></span>: Foo &#123; <span class="hljs-keyword">return</span> FooImpl() &#125;<br></code></pre></td></tr></table></figure>

<h3 id="测试方法的名称"><a href="#测试方法的名称" class="headerlink" title="测试方法的名称"></a>测试方法的名称</h3><p><strong>当且仅当</strong>在测试中，可以使用反引号括起来的带空格的方法名。 请注意，Android 运行时目前不支持这样的方法名。测试代码中也允许方法名使用下划线。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTestCase</span> &#123;<br>     <span class="hljs-meta">@Test</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> `ensure everything works`<span class="hljs-params">()</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><br>     <span class="hljs-meta">@Test</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ensureEverythingWorks_onAndroid</span><span class="hljs-params">()</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="属性名"><a href="#属性名" class="headerlink" title="属性名"></a>属性名</h3><p>常量名称（标有 <code>const</code> 的属性，或者保存不可变数据的没有自定义 <code>get</code> 函数的顶层&#x2F;对象 <code>val</code> 属性）应该使用大写、下划线分隔的 (<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Snake_case">screaming snake case</a>) 名称：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> MAX_COUNT = <span class="hljs-number">8</span><br><span class="hljs-keyword">val</span> USER_NAME_FIELD = <span class="hljs-string">&quot;UserName&quot;</span><br></code></pre></td></tr></table></figure>

<p>保存带有行为的对象或者可变数据的顶层&#x2F;对象属性的名称应该使用驼峰风格名称：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> mutableCollection: MutableSet&lt;String&gt; = HashSet()<br></code></pre></td></tr></table></figure>

<p>保存单例对象引用的属性的名称可以使用与 <code>object</code> 声明相同的命名风格：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> PersonComparator: Comparator&lt;Person&gt; = <span class="hljs-comment">/*……*/</span><br></code></pre></td></tr></table></figure>

<p>对于枚举常量，可以使用大写、下划线分隔的名称 (<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Snake_case">screaming snake case</a>) （<code>enum class Color &#123; RED, GREEN &#125;</code>）也可使用首字母大写的常规驼峰名称，具体取决于用途。</p>
<h3 id="幕后属性的名称"><a href="#幕后属性的名称" class="headerlink" title="幕后属性的名称"></a>幕后属性的名称</h3><p>如果一个类有两个概念上相同的属性，一个是公共 API 的一部分，另一个是实现细节，那么使用下划线作为私有属性名称的前缀：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _elementList = mutableListOf&lt;Element&gt;()<br><br>    <span class="hljs-keyword">val</span> elementList: List&lt;Element&gt;<br>         <span class="hljs-keyword">get</span>() = _elementList<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="选择好名称"><a href="#选择好名称" class="headerlink" title="选择好名称"></a>选择好名称</h3><p>类的名称通常是用来解释类<em>是</em>什么的名词或者名词短语：<code>List</code>、 <code>PersonReader</code>。</p>
<p>方法的名称通常是动词或动词短语，说明该方法<em>做</em>什么：<code>close</code>、 <code>readPersons</code>。 修改对象或者返回一个新对象的名称也应遵循建议。例如 <code>sort</code> 是对一个集合就地排序，而 <code>sorted</code> 是返回一个排序后的集合副本。</p>
<p>名称应该表明实体的目的是什么，所以最好避免在名称中使用无意义的单词 （<code>Manager</code>、 <code>Wrapper</code>）。</p>
<p>当使用首字母缩写作为名称的一部分时，如果缩写由两个字母组成，就将其大写（<code>IOStream</code>）； 而如果缩写更长一些，就只大写其首字母（<code>XmlFormatter</code>、 <code>HttpInputStream</code>）。</p>
<h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h3><p>使用 4 个空格缩进。不要使用 tab。</p>
<p>对于花括号，将左花括号放在结构起始处的行尾，而将右花括号放在与左括结构横向对齐的单独一行。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">if</span> (elements != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">for</span> (element <span class="hljs-keyword">in</span> elements) &#123;<br>        <span class="hljs-comment">// ……</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>在 Kotlin 中，分号是可选的，因此换行很重要。语言设计采用 Java 风格的花括号格式，如果尝试使用不同的格式化风格，那么可能会遇到意外的行为。</p>
<p><svg width="24" height="24" fill="#4dbb5f" viewBox="0 0 24 24"><path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path></svg></p>
</blockquote>
<h3 id="横向空白"><a href="#横向空白" class="headerlink" title="横向空白"></a>横向空白</h3><ul>
<li>在二元操作符左右留空格（<code>a + b</code>）。例外：不要在“range to”操作符（<code>0..i</code>）左右留空格。</li>
<li>不要在一元运算符左右留空格（<code>a++</code>）。</li>
<li>在控制流关键字（<code>if</code>、 <code>when</code>、 <code>for</code> 以及 <code>while</code>）与相应的左括号之间留空格。</li>
<li>不要在主构造函数声明、方法声明或者方法调用的左括号之前留空格。</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>(<span class="hljs-keyword">val</span> x: <span class="hljs-built_in">Int</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>)</span></span> &#123; …… &#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bar</span><span class="hljs-params">()</span></span> &#123;<br>    foo(<span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>绝不在 <code>(</code>、 <code>[</code> 之后或者 <code>]</code>、 <code>)</code> 之前留空格</li>
<li>绝不在<code>.</code> 或者 <code>?.</code> 左右留空格：<code>foo.bar().filter &#123; it &gt; 2 &#125;.joinToString()</code>, <code>foo?.bar()</code></li>
<li>在 <code>//</code> 之后留一个空格：<code>// 这是一条注释</code></li>
<li>不要在用于指定类型参数的尖括号前后留空格：<code>class Map&lt;K, V&gt; &#123; …… &#125;</code></li>
<li>不要在 <code>::</code> 前后留空格：<code>Foo::class</code>、 <code>String::length</code></li>
<li>不要在用于标记可空类型的 <code>?</code> 前留空格：<code>String?</code></li>
</ul>
<p>作为一般规则，避免任何类型的水平对齐。将标识符重命名为不同长度的名称不应该影响声明或者任何用法的格式。</p>
<h3 id="冒号"><a href="#冒号" class="headerlink" title="冒号"></a>冒号</h3><p>在以下场景中的 <code>:</code> 之前留一个空格：</p>
<ul>
<li>当它用于分隔类型与超类型时</li>
<li>当委托给一个超类的构造函数或者同一类的另一个构造函数时</li>
<li>在 <code>object</code> 关键字之后</li>
</ul>
<p>而当分隔声明与其类型时，不要在 <code>:</code> 之前留空格。</p>
<p>在 <code>:</code> 之后总要留一个空格。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span>&lt;<span class="hljs-type">out T : Any</span>&gt; : <span class="hljs-type">IFoo</span> &#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>)</span></span>: T<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FooImpl</span> : <span class="hljs-type">Foo</span>() &#123;<br>    <span class="hljs-keyword">constructor</span>(x: String) : <span class="hljs-keyword">this</span>(x) &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><br>    <span class="hljs-keyword">val</span> x = <span class="hljs-keyword">object</span> : IFoo &#123; <span class="hljs-comment">/*……*/</span> &#125; <br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="类头"><a href="#类头" class="headerlink" title="类头"></a>类头</h3><p>具有少数主构造函数参数的类可以写成一行：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(id: <span class="hljs-built_in">Int</span>, name: String)<br></code></pre></td></tr></table></figure>

<p>具有较长类头的类应该格式化，以使每个主构造函数参数都在带有缩进的独立的行中。 另外，右括号应该位于一个新行上。如果使用了继承，那么超类的构造函数调用或者所实现接口的列表应该与右括号位于同一行：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<br>    id: <span class="hljs-built_in">Int</span>,<br>    name: String,<br>    surname: String<br>) : Human(id, name) &#123; <span class="hljs-comment">/*……*/</span> &#125;<br></code></pre></td></tr></table></figure>

<p>对于多个接口，应该将超类构造函数调用放在首位，然后将每个接口应放在不同的行中：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<br>    id: <span class="hljs-built_in">Int</span>,<br>    name: String,<br>    surname: String<br>) : Human(id, name),<br>    KotlinMaker &#123; <span class="hljs-comment">/*……*/</span> &#125;<br></code></pre></td></tr></table></figure>

<p>对于具有很长超类型列表的类，在冒号后面换行，并横向对齐所有超类型名：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFavouriteVeryLongClassHolder</span> :<br>    <span class="hljs-type">MyLongHolder</span>&lt;<span class="hljs-type">MyFavouriteVeryLongClass</span>&gt;(),<br>    SomeOtherInterface,<br>    AndAnotherOne &#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>为了将类头与类体分隔清楚，当类头很长时，可以在类头后放一空行 （如上例所示）或者将左花括号放在独立行上：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFavouriteVeryLongClassHolder</span> :<br>    <span class="hljs-type">MyLongHolder</span>&lt;<span class="hljs-type">MyFavouriteVeryLongClass</span>&gt;(),<br>    SomeOtherInterface,<br>    AndAnotherOne <br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>构造函数参数使用常规缩进（4 个空格）。这确保了在主构造函数中声明的属性与 在类体中声明的属性具有相同的缩进。</p>
<h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><p>如果一个声明有多个修饰符，请始终按照以下顺序安放：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">public</span> / <span class="hljs-keyword">protected</span> / <span class="hljs-keyword">private</span> / <span class="hljs-keyword">internal</span><br><span class="hljs-keyword">expect</span> / <span class="hljs-keyword">actual</span><br><span class="hljs-keyword">final</span> / <span class="hljs-keyword">open</span> / <span class="hljs-keyword">abstract</span> / <span class="hljs-keyword">sealed</span> / <span class="hljs-keyword">const</span><br><span class="hljs-keyword">external</span><br><span class="hljs-keyword">override</span><br><span class="hljs-keyword">lateinit</span><br><span class="hljs-keyword">tailrec</span><br><span class="hljs-keyword">vararg</span><br><span class="hljs-keyword">suspend</span><br><span class="hljs-keyword">inner</span><br><span class="hljs-keyword">enum</span> / <span class="hljs-keyword">annotation</span> / <span class="hljs-function"><span class="hljs-keyword">fun</span> // 在 `<span class="hljs-keyword">fun</span> <span class="hljs-keyword">interface</span>` 中是修饰符</span><br><span class="hljs-keyword">companion</span><br><span class="hljs-keyword">inline</span>/ value<br><span class="hljs-keyword">infix</span><br><span class="hljs-keyword">operator</span><br><span class="hljs-keyword">data</span><br></code></pre></td></tr></table></figure>

<p>将所有注解放在修饰符前：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@Named(<span class="hljs-string">&quot;Foo&quot;</span>)</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> foo: Foo<br></code></pre></td></tr></table></figure>

<p>除非你在编写库，否则请省略多余的修饰符（例如 <code>public</code>）。</p>
<h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><p>通常将注解放在单独的行上，在它们所依附的声明之前，并使用相同的缩进：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@Target(AnnotationTarget.PROPERTY)</span><br><span class="hljs-keyword">annotation</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JsonExclude</span><br></code></pre></td></tr></table></figure>

<p>无参数的注解可以放在同一行：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@JsonExclude</span> <span class="hljs-meta">@JvmField</span><br><span class="hljs-keyword">var</span> x: String<br></code></pre></td></tr></table></figure>

<p>无参数的单个注解可以与相应的声明放在同一行：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@Test</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br></code></pre></td></tr></table></figure>

<h3 id="文件注解"><a href="#文件注解" class="headerlink" title="文件注解"></a>文件注解</h3><p>文件注解位于文件注释（如果有的话）之后、<code>package</code> 语句之前， 并且用一个空白行与 <code>package</code> 分开（为了强调其针对文件而不是包）。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">/** 授权许可、版权以及任何其他内容 */</span><br><span class="hljs-meta">@file:JvmName</span>(<span class="hljs-string">&quot;FooBar&quot;</span>)<br><br><span class="hljs-keyword">package</span> foo.bar<br></code></pre></td></tr></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>如果函数签名不适合单行，请使用以下语法：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">longMethodName</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    argument: <span class="hljs-type">ArgumentType</span> = defaultValue,</span></span><br><span class="hljs-params"><span class="hljs-function">    argument2: <span class="hljs-type">AnotherArgumentType</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span>: ReturnType &#123;<br>    <span class="hljs-comment">// 函数体</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>函数参数使用常规缩进（4 个空格）。有助于确保与构造函数参数一致</p>
<p>对于由单个表达式构成的函数体，优先使用表达式形式。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> &#123;     <span class="hljs-comment">// 不良</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> = <span class="hljs-number">1</span>        <span class="hljs-comment">// 良好</span><br></code></pre></td></tr></table></figure>

<h3 id="表达式函数体格式化"><a href="#表达式函数体格式化" class="headerlink" title="表达式函数体格式化"></a>表达式函数体格式化</h3><p>如果函数的表达式函数体与函数声明不适合放在同一行，那么将 <code>=</code> 留在第一， 并将表达式函数体缩进 4 个空格。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">f</span><span class="hljs-params">(x: <span class="hljs-type">String</span>, y: <span class="hljs-type">String</span>, z: <span class="hljs-type">String</span>)</span></span> =<br>    veryLongFunctionCallWithManyWords(andLongParametersToo(), x, y, z)<br></code></pre></td></tr></table></figure>

<h3 id="属性格式化"><a href="#属性格式化" class="headerlink" title="属性格式化"></a>属性格式化</h3><p>对于非常简单的只读属性，请考虑单行格式：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> isEmpty: <span class="hljs-built_in">Boolean</span> <span class="hljs-keyword">get</span>() = size == <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<p>对于更复杂的属性，总是将 <code>get</code> 与 <code>set</code> 关键字放在不同的行上：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> foo: String<br>    <span class="hljs-keyword">get</span>() &#123; <span class="hljs-comment">/*……*/</span> &#125;<br></code></pre></td></tr></table></figure>

<p>对于具有初始化器的属性，如果初始化器很长，那么在 <code>=</code> 号后增加一个换行并将初始化器缩进四个空格：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> defaultCharset: Charset? =<br>    EncodingRegistry.getInstance().getDefaultCharsetForPropertiesFiles(file)<br></code></pre></td></tr></table></figure>

<h3 id="控制流语句"><a href="#控制流语句" class="headerlink" title="控制流语句"></a>控制流语句</h3><p>如果 <code>if</code> 或 <code>when</code> 语句的条件有多行，那么在语句体外边总是使用大括号。 将该条件的每个后续行相对于条件语句起始处缩进 4 个空格。 将该条件的右圆括号与左花括号放在单独一行：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">if</span> (!component.isSyncing &amp;&amp;<br>    !hasAnyKotlinRuntimeInScope(module)<br>) &#123;<br>    <span class="hljs-keyword">return</span> createKotlinNotConfiguredPanel(module)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这有助于对齐条件与语句体。</p>
<p>将 <code>else</code>、 <code>catch</code>、 <code>finally</code> 关键字以及 <code>do-while</code> 循环的 <code>while</code> 关键字与之前的花括号放在相同的行上：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">if</span> (condition) &#123;<br>    <span class="hljs-comment">// 主体</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// else 部分</span><br>&#125;<br><br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// 主体</span><br>&#125; <span class="hljs-keyword">finally</span> &#123;<br>    <span class="hljs-comment">// 清理</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>在 <code>when</code> 语句中，如果一个分支不止一行，可以考虑用空行将其与相邻的分支块分开：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parsePropertyValue</span><span class="hljs-params">(propName: <span class="hljs-type">String</span>, token: <span class="hljs-type">Token</span>)</span></span> &#123;<br>    <span class="hljs-keyword">when</span> (token) &#123;<br>        <span class="hljs-keyword">is</span> Token.ValueToken -&gt;<br>            callback.visitValue(propName, token.value)<br><br>        Token.LBRACE -&gt; &#123; <span class="hljs-comment">// ……</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>将短分支放在与条件相同的行上，无需花括号。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">when</span> (foo) &#123;<br>    <span class="hljs-literal">true</span> -&gt; bar() <span class="hljs-comment">// 良好</span><br>    <span class="hljs-literal">false</span> -&gt; &#123; baz() &#125; <span class="hljs-comment">// 不良</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="方法调用格式化"><a href="#方法调用格式化" class="headerlink" title="方法调用格式化"></a>方法调用格式化</h3><p>在较长参数列表的左括号后添加一个换行符。按 4 个空格缩进参数。 将密切相关的多个参数分在同一行。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">drawSquare(<br>    x = <span class="hljs-number">10</span>, y = <span class="hljs-number">10</span>,<br>    width = <span class="hljs-number">100</span>, height = <span class="hljs-number">100</span>,<br>    fill = <span class="hljs-literal">true</span><br>)<br></code></pre></td></tr></table></figure>

<p>在分隔参数名与值的 <code>=</code> 左右留空格。</p>
<h3 id="链式调用换行"><a href="#链式调用换行" class="headerlink" title="链式调用换行"></a>链式调用换行</h3><p>当对链式调用换行时，将 <code>.</code> 字符或者 <code>?.</code> 操作符放在下一行，并带有单倍缩进：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> anchor = owner<br>    ?.firstChild!!<br>    .siblings(forward = <span class="hljs-literal">true</span>)<br>    .dropWhile &#123; it <span class="hljs-keyword">is</span> PsiComment || it <span class="hljs-keyword">is</span> PsiWhiteSpace &#125;<br></code></pre></td></tr></table></figure>

<p>调用链的第一个调用通常在换行之前，当然如果能让代码更有意义也可以忽略这点。</p>
<h3 id="Lambda-表达式"><a href="#Lambda-表达式" class="headerlink" title="Lambda 表达式"></a>Lambda 表达式</h3><p>在 lambda 表达式中，应该在花括号左右以及分隔参数与代码体的箭头左右留空格。 如果一个调用接受单个 lambda 表达式，尽可能将其放在圆括号外边传入。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">list.filter &#123; it &gt; <span class="hljs-number">10</span> &#125;<br></code></pre></td></tr></table></figure>

<p>如果为 lambda 表达式分配一个标签，那么不要在该标签与左花括号之间留空格：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123;<br>    ints.forEach <span class="hljs-symbol">lit@</span>&#123;<br>        <span class="hljs-comment">// ……</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在多行的 lambda 表达式中声明参数名时，将参数名放在第一行，后跟箭头与换行符：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">appendCommaSeparated(properties) &#123; prop -&gt;<br>    <span class="hljs-keyword">val</span> propertyValue = prop.<span class="hljs-keyword">get</span>(obj)  <span class="hljs-comment">// ……</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果参数列表太长而无法放在一行上，请将箭头放在单独一行：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">foo &#123;<br>   context: Context,<br>   environment: Env<br>   -&gt;<br>   context.configureEnv(environment)<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="尾部逗号"><a href="#尾部逗号" class="headerlink" title="尾部逗号"></a>尾部逗号</h3><p>尾部逗号是一系列元素中最后一项之后的逗号符号：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<br>    <span class="hljs-keyword">val</span> firstName: String,<br>    <span class="hljs-keyword">val</span> lastName: String,<br>    <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>, <span class="hljs-comment">// 尾部逗号</span><br>)<br></code></pre></td></tr></table></figure>

<p>使用尾部逗号有以下几点收益：</p>
<ul>
<li>使版本控制差异更清晰——因为所有焦点都集中在变更的值上。</li>
<li>使添加及重新排序元素更容易——操作元素时无需再添加或删除逗号。</li>
<li>简化了代码生成逻辑（例如对象初始化器）。 最后一个元素也可以有逗号。</li>
</ul>
<p>尾部逗号完全是可选的——没有它们代码仍可以照常工作。 Kotlin 风格指南鼓励在声明处使用尾部逗号，而自行决定在调用处是否使用。</p>
<p>如需在 IntelliJ IDEA 格式化程序中启用尾部逗号，请转到 <strong>Settings&#x2F;Preferences | Editor | Code Style | Kotlin</strong>， 打开 <strong>Other</strong> 选项卡并选择 <strong>Use trailing comma</strong> 选项。</p>
<h4 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Direction</span> &#123;<br>    NORTH,<br>    SOUTH,<br>    WEST,<br>    EAST, <span class="hljs-comment">// 尾部逗号</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="值实参"><a href="#值实参" class="headerlink" title="值实参"></a>值实参</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">shift</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>, y: <span class="hljs-type">Int</span>)</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br>shift(<br>    <span class="hljs-number">25</span>,<br>    <span class="hljs-number">20</span>, <span class="hljs-comment">// 尾部逗号</span><br>)<br><span class="hljs-keyword">val</span> colors = listOf(<br>    <span class="hljs-string">&quot;red&quot;</span>,<br>    <span class="hljs-string">&quot;green&quot;</span>,<br>    <span class="hljs-string">&quot;blue&quot;</span>, <span class="hljs-comment">// 尾部逗号</span><br>)<br></code></pre></td></tr></table></figure>

<h4 id="类属性与形参"><a href="#类属性与形参" class="headerlink" title="类属性与形参"></a>类属性与形参</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Customer</span>(<br>    <span class="hljs-keyword">val</span> name: String,<br>    <span class="hljs-keyword">val</span> lastName: String, <span class="hljs-comment">// 尾部逗号</span><br>)<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Customer</span>(<br>    <span class="hljs-keyword">val</span> name: String,<br>    lastName: String, <span class="hljs-comment">// 尾部逗号</span><br>)<br></code></pre></td></tr></table></figure>

<h4 id="函数值形参"><a href="#函数值形参" class="headerlink" title="函数值形参"></a>函数值形参</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">powerOf</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    number: <span class="hljs-type">Int</span>, </span></span><br><span class="hljs-params"><span class="hljs-function">    exponent: <span class="hljs-type">Int</span>, <span class="hljs-comment">// 尾部逗号</span></span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><span class="hljs-keyword">constructor</span>(<br>    x: Comparable&lt;Number&gt;,<br>    y: Iterable&lt;Number&gt;, <span class="hljs-comment">// 尾部逗号</span><br>) &#123;&#125;<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">print</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    <span class="hljs-keyword">vararg</span> quantity: <span class="hljs-type">Int</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    description: <span class="hljs-type">String</span>, <span class="hljs-comment">// 尾部逗号</span></span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span> &#123;&#125;<br></code></pre></td></tr></table></figure>

<h4 id="类型可选的形参（包括-setter）"><a href="#类型可选的形参（包括-setter）" class="headerlink" title="类型可选的形参（包括 setter）"></a>类型可选的形参（包括 setter）</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">val</span> sum: (<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> = <span class="hljs-function"><span class="hljs-title">fun</span><span class="hljs-params">(</span></span><br><span class="hljs-params"><span class="hljs-function">    x,</span></span><br><span class="hljs-params"><span class="hljs-function">    y,</span></span><br><span class="hljs-params"><span class="hljs-function">    z, <span class="hljs-comment">// 尾部逗号</span></span></span><br><span class="hljs-params"><span class="hljs-function">)</span></span>: <span class="hljs-built_in">Int</span> &#123;<br>    <span class="hljs-keyword">return</span> x + y + x<br>&#125;<br>println(sum(<span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>))<br></code></pre></td></tr></table></figure>

<h4 id="索引后缀"><a href="#索引后缀" class="headerlink" title="索引后缀"></a>索引后缀</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Surface</span> &#123;<br>    <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>, y: <span class="hljs-type">Int</span>)</span></span> = <span class="hljs-number">2</span> * x + <span class="hljs-number">4</span> * y - <span class="hljs-number">10</span><br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getZValue</span><span class="hljs-params">(mySurface: <span class="hljs-type">Surface</span>, xValue: <span class="hljs-type">Int</span>, yValue: <span class="hljs-type">Int</span>)</span></span> =<br>    mySurface[<br>        xValue,<br>        yValue, <span class="hljs-comment">// 尾部逗号</span><br>    ]<br></code></pre></td></tr></table></figure>

<h4 id="lambda-表达式形参"><a href="#lambda-表达式形参" class="headerlink" title="lambda 表达式形参"></a>lambda 表达式形参</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> x = &#123;<br>            x: Comparable&lt;Number&gt;,<br>            y: Iterable&lt;Number&gt;, <span class="hljs-comment">// 尾部逗号</span><br>        -&gt;<br>        println(<span class="hljs-string">&quot;1&quot;</span>)<br>    &#125;<br>    println(x)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="when-条目"><a href="#when-条目" class="headerlink" title="when 条目"></a><code>when</code> 条目</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isReferenceApplicable</span><span class="hljs-params">(myReference: <span class="hljs-type">KClass</span>&lt;*&gt;)</span></span> = <span class="hljs-keyword">when</span> (myReference) &#123;<br>    Comparable::<span class="hljs-keyword">class</span>,<br>    Iterable::<span class="hljs-keyword">class</span>,<br>    String::<span class="hljs-keyword">class</span>, <span class="hljs-comment">// 尾部逗号</span><br>        -&gt; <span class="hljs-literal">true</span><br>    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="（注解中的）集合字面值"><a href="#（注解中的）集合字面值" class="headerlink" title="（注解中的）集合字面值"></a>（注解中的）集合字面值</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">annotation</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApplicableFor</span>(<span class="hljs-keyword">val</span> services: Array&lt;String&gt;)<br><span class="hljs-meta">@ApplicableFor([</span><br><span class="hljs-meta">    <span class="hljs-string">&quot;serializer&quot;</span>,</span><br><span class="hljs-meta">    <span class="hljs-string">&quot;balancer&quot;</span>,</span><br><span class="hljs-meta">    <span class="hljs-string">&quot;database&quot;</span>,</span><br><span class="hljs-meta">    <span class="hljs-string">&quot;inMemoryCache&quot;</span>, // 尾部逗号</span><br><span class="hljs-meta">])</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span> &#123;&#125;<br></code></pre></td></tr></table></figure>

<h4 id="类型实参"><a href="#类型实参" class="headerlink" title="类型实参"></a>类型实参</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T1, T2&gt;</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123;&#125;<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    foo&lt;<br>            Comparable&lt;Number&gt;,<br>            Iterable&lt;Number&gt;, <span class="hljs-comment">// 尾部逗号</span><br>            &gt;()<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="类型形参"><a href="#类型形参" class="headerlink" title="类型形参"></a>类型形参</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMap</span>&lt;<span class="hljs-type"></span><br><span class="hljs-type">        MyKey,</span><br><span class="hljs-type">        MyValue, // 尾部逗号</span><br><span class="hljs-type">        </span>&gt; &#123;&#125;<br></code></pre></td></tr></table></figure>

<h4 id="解构声明"><a href="#解构声明" class="headerlink" title="解构声明"></a>解构声明</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>(<span class="hljs-keyword">val</span> manufacturer: String, <span class="hljs-keyword">val</span> model: String, <span class="hljs-keyword">val</span> year: <span class="hljs-built_in">Int</span>)<br><span class="hljs-keyword">val</span> myCar = Car(<span class="hljs-string">&quot;Tesla&quot;</span>, <span class="hljs-string">&quot;Y&quot;</span>, <span class="hljs-number">2019</span>)<br><span class="hljs-keyword">val</span> (<br>    manufacturer,<br>    model,<br>    year, <span class="hljs-comment">// 尾部逗号</span><br>) = myCar<br><span class="hljs-keyword">val</span> cars = listOf&lt;Car&gt;()<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printMeanValue</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">var</span> meanValue: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> ((<br>        _,<br>        _,<br>        year, <span class="hljs-comment">// 尾部逗号</span><br>    ) <span class="hljs-keyword">in</span> cars) &#123;<br>        meanValue += year<br>    &#125;<br>    println(meanValue/cars.size)<br>&#125;<br>printMeanValue()<br></code></pre></td></tr></table></figure>

<h2 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h2><p>对于较长的文档注释，将开头 <code>/**</code> 放在一个独立行中，并且后续每行都以星号开头：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 这是一条多行</span><br><span class="hljs-comment"> * 文档注释。</span><br><span class="hljs-comment"> */</span><br></code></pre></td></tr></table></figure>

<p>简短注释可以放在一行内：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">/** 这是一条简短文档注释。 */</span><br></code></pre></td></tr></table></figure>

<p>通常，避免使用 <code>@param</code> 与 <code>@return</code> 标记。而是将参数与返回值的描述直接合并到文档注释中，并在提到参数的任何地方加上参数链接。 只有当需要不适合放进主文本流程的冗长描述时才应使用 <code>@param</code> 与 <code>@return</code>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// 避免这样：</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Returns the absolute value of the given number.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> number The number to return the absolute value for.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> The absolute value.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">abs</span><span class="hljs-params">(number: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><br><span class="hljs-comment">// 而要这样：</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Returns the absolute value of the given [number].</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">abs</span><span class="hljs-params">(number: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br></code></pre></td></tr></table></figure>

<h2 id="避免重复结构"><a href="#避免重复结构" class="headerlink" title="避免重复结构"></a>避免重复结构</h2><p>一般来说，如果 Kotlin 中的某种语法结构是可选的并且被 IDE 高亮为冗余的，那么应该在代码中省略之。为了清楚起见，不要在代码中保留不必要的语法元素 。</p>
<h3 id="Unit-返回类型"><a href="#Unit-返回类型" class="headerlink" title="Unit 返回类型"></a>Unit 返回类型</h3><p>如果函数返回 Unit，那么应该省略返回类型：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> &#123; <span class="hljs-comment">// 这里省略了“: Unit”</span><br><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="分号"><a href="#分号" class="headerlink" title="分号"></a>分号</h3><p>尽可能省略分号。</p>
<h3 id="字符串模版"><a href="#字符串模版" class="headerlink" title="字符串模版"></a>字符串模版</h3><p>将简单变量传入到字符串模版中时不要使用花括号。只有用到更长表达式时才使用花括号。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">println(<span class="hljs-string">&quot;<span class="hljs-variable">$name</span> has <span class="hljs-subst">$&#123;children.size&#125;</span> children&quot;</span>)<br></code></pre></td></tr></table></figure>

<h2 id="语言特性的惯用法"><a href="#语言特性的惯用法" class="headerlink" title="语言特性的惯用法"></a>语言特性的惯用法</h2><h3 id="不可变性"><a href="#不可变性" class="headerlink" title="不可变性"></a>不可变性</h3><p>优先使用不可变（而不是可变）数据。初始化后未修改的局部变量与属性，总是将其声明为 <code>val</code> 而不是 <code>var</code> 。</p>
<p>总是使用不可变集合接口（<code>Collection</code>, <code>List</code>, <code>Set</code>, <code>Map</code>）来声明无需改变的集合。使用工厂函数创建集合实例时，尽可能选用返回不可变集合类型的函数：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// 不良：使用可变集合类型作为无需改变的值</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">validateValue</span><span class="hljs-params">(actualValue: <span class="hljs-type">String</span>, allowedValues: <span class="hljs-type">HashSet</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> &#123; …… &#125;<br><br><span class="hljs-comment">// 良好：使用不可变集合类型</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">validateValue</span><span class="hljs-params">(actualValue: <span class="hljs-type">String</span>, allowedValues: <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> &#123; …… &#125;<br><br><span class="hljs-comment">// 不良：arrayListOf() 返回 ArrayList&lt;T&gt;，这是一个可变集合类型</span><br><span class="hljs-keyword">val</span> allowedValues = arrayListOf(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>)<br><br><span class="hljs-comment">// 良好：listOf() 返回 List&lt;T&gt;</span><br><span class="hljs-keyword">val</span> allowedValues = listOf(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h3><p>优先声明带有默认参数的函数而不是声明重载函数。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// 不良</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span> = foo(<span class="hljs-string">&quot;a&quot;</span>)<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">(a: <span class="hljs-type">String</span>)</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br><br><span class="hljs-comment">// 良好</span><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">foo</span><span class="hljs-params">(a: <span class="hljs-type">String</span> = <span class="hljs-string">&quot;a&quot;</span>)</span></span> &#123; <span class="hljs-comment">/*……*/</span> &#125;<br></code></pre></td></tr></table></figure>

<h3 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h3><p>如果有一个在代码库中多次用到的函数类型或者带有类型参数的类型，那么最好为它定义一个类型别名：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">typealias</span> MouseClickHandler = (Any, MouseEvent) -&gt; <span class="hljs-built_in">Unit</span><br><span class="hljs-keyword">typealias</span> PersonIndex = Map&lt;String, Person&gt;<br></code></pre></td></tr></table></figure>

<p>如果使用一个 private 或者 internal 的类型别名来避免名称冲突，请优先使用<a target="_blank" rel="noopener" href="https://book.kotlincn.net/text/packages.html">包与导入</a>中提到的 <code>import …… as ……</code>。</p>
<h3 id="Lambda-表达式参数"><a href="#Lambda-表达式参数" class="headerlink" title="Lambda 表达式参数"></a>Lambda 表达式参数</h3><p>在简短、非嵌套的 lambda 表达式中建议使用 <code>it</code> 用法而不是显式声明参数。而在有参数的嵌套 lambda 表达式中，始终显式声明参数。</p>
<h3 id="在-lambda-表达式中返回"><a href="#在-lambda-表达式中返回" class="headerlink" title="在 lambda 表达式中返回"></a>在 lambda 表达式中返回</h3><p>避免在 lambda 表达式中使用多个返回到标签。请考虑重新组织这样的 lambda 表达式使其只有单一退出点。 如果这无法做到或者不够清晰，请考虑将 lambda 表达式转换为匿名函数。</p>
<p>不要在 lambda 表达式的最后一条语句中使用返回到标签。</p>
<h3 id="具名参数"><a href="#具名参数" class="headerlink" title="具名参数"></a>具名参数</h3><p>当一个方法接受多个相同的原生类型参数或者多个 <code>Boolean</code> 类型参数时，请使用具名参数语法， 除非在上下文中的所有参数的含义都已绝对清楚。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">drawSquare(x = <span class="hljs-number">10</span>, y = <span class="hljs-number">10</span>, width = <span class="hljs-number">100</span>, height = <span class="hljs-number">100</span>, fill = <span class="hljs-literal">true</span>)<br></code></pre></td></tr></table></figure>

<h3 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h3><p>优先使用 <code>try</code>、<code>if</code> 与 <code>when</code> 的表达形式。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (x) foo() <span class="hljs-keyword">else</span> bar()<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span>(x) &#123;<br>    <span class="hljs-number">0</span> -&gt; <span class="hljs-string">&quot;zero&quot;</span><br>    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-string">&quot;nonzero&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>优先选用上述代码而不是：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">if</span> (x)<br>    <span class="hljs-keyword">return</span> foo()<br><span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">return</span> bar()<br><span class="hljs-keyword">when</span>(x) &#123;<br>    <span class="hljs-number">0</span> -&gt; <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;zero&quot;</span><br>    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;nonzero&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="if-还是-when"><a href="#if-还是-when" class="headerlink" title="if 还是 when"></a>if 还是 when</h3><p>二元条件优先使用 <code>if</code> 而不是 <code>when</code>。 例如，使用 <code>if</code> 的这种语法：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">if</span> (x == <span class="hljs-literal">null</span>) …… <span class="hljs-keyword">else</span> ……<br></code></pre></td></tr></table></figure>

<p>而不是使用 <code>when</code> 的这种：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">when</span> (x) &#123;<br>    <span class="hljs-literal">null</span> -&gt; <span class="hljs-comment">// ……</span><br>    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-comment">// ……</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果有三个或多个选项时优先使用 <code>when</code>。</p>
<h3 id="在条件中的可空的布尔值"><a href="#在条件中的可空的布尔值" class="headerlink" title="在条件中的可空的布尔值"></a>在条件中的可空的布尔值</h3><p>如果需要在条件语句中用到可空的 <code>Boolean</code>, 使用 <code>if (value == true)</code> 或 <code>if (value == false)</code> 检测。</p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p>优先使用高阶函数（<code>filter</code>、<code>map</code> 等）而不是循环。例外：<code>forEach</code>（优先使用常规的 <code>for</code> 循环， 除非 <code>forEach</code> 的接收者是可空的或者 <code>forEach</code> 用做长调用链的一部分。）</p>
<p>当在使用多个高阶函数的复杂表达式与循环之间进行选择时，请了解每种情况下所执行操作的开销并且记得考虑性能因素。</p>
<h3 id="区间上循环"><a href="#区间上循环" class="headerlink" title="区间上循环"></a>区间上循环</h3><p>使用 <code>..&lt;</code> 操作符在一个左闭右开区间上循环：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span>.n - <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">/*……*/</span> &#125;  <span class="hljs-comment">// 不良</span><br><span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span>.&lt;n) &#123; <span class="hljs-comment">/*……*/</span> &#125;  <span class="hljs-comment">// 良好</span><br></code></pre></td></tr></table></figure>

<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>优先使用字符串模板而不是字符串拼接。</p>
<p>优先使用多行字符串而不是将 <code>\n</code> 转义序列嵌入到常规字符串字面值中。</p>
<p>如需在多行字符串中维护缩进，当生成的字符串不需要任何内部缩进时使用 <code>trimIndent</code>，而需要内部缩进时使用 <code>trimMargin</code>：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">//sampleStart</span><br>   println(<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Not</span><br><span class="hljs-string">    trimmed</span><br><span class="hljs-string">    text</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>   )<br><br>   println(<span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Trimmed</span><br><span class="hljs-string">    text</span><br><span class="hljs-string">    &quot;&quot;&quot;</span>.trimIndent()<br>   )<br><br>   println()<br><br>   <span class="hljs-keyword">val</span> a = <span class="hljs-string">&quot;&quot;&quot;Trimmed to margin text:</span><br><span class="hljs-string">|if(a &gt; 1) &#123;</span><br><span class="hljs-string">|    return a</span><br><span class="hljs-string">|&#125;&quot;&quot;&quot;</span>.trimMargin()<br><br>   println(a)<br><span class="hljs-comment">//sampleEnd</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>了解 <a target="_blank" rel="noopener" href="https://book.kotlincn.net/text/java-to-kotlin-idioms-strings.html#%E4%BD%BF%E7%94%A8%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2">Java 与 Kotlin 多行字符串</a>的区别。</p>
<h3 id="函数还是属性"><a href="#函数还是属性" class="headerlink" title="函数还是属性"></a>函数还是属性</h3><p>在某些情况下，不带参数的函数可与只读属性互换。 虽然语义相似，但是在某种程度上有一些风格上的约定。</p>
<p>底层算法优先使用属性而不是函数：</p>
<ul>
<li>不会抛异常</li>
<li>计算开销小（或者在首次运行时缓存）</li>
<li>如果对象状态没有改变，那么多次调用都会返回相同结果</li>
</ul>
<h3 id="扩展函数"><a href="#扩展函数" class="headerlink" title="扩展函数"></a>扩展函数</h3><p>放手去用扩展函数。每当你有一个主要用于某个对象的函数时，可以考虑使其成为一个以该对象为接收者的扩展函数。为了尽量减少 API 污染，尽可能地限制扩展函数的可见性。根据需要，使用局部扩展函数、成员扩展函数或者具有私有可视性的顶层扩展函数。</p>
<h3 id="中缀函数"><a href="#中缀函数" class="headerlink" title="中缀函数"></a>中缀函数</h3><p>一个函数只有用于两个角色类似的对象时才将其声明为中缀（<code>infix</code>）函数。良好示例如：<code>and</code>、 <code>to</code>、<code>zip</code>。 不良示例如：<code>add</code>。</p>
<p>如果一个方法会改动其接收者，那么不要声明为中缀（<code>infix</code>）形式。</p>
<h3 id="工厂函数"><a href="#工厂函数" class="headerlink" title="工厂函数"></a>工厂函数</h3><p>如果为一个类声明一个工厂函数，那么不要让它与类自身同名。优先使用独特的名称， 该名称能表明为何该工厂函数的行为与众不同。只有当确实没有特殊的语义时， 才可以使用与该类相同的名称。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>(<span class="hljs-keyword">val</span> x: <span class="hljs-built_in">Double</span>, <span class="hljs-keyword">val</span> y: <span class="hljs-built_in">Double</span>) &#123;<br>    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> &#123;<br>        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fromPolar</span><span class="hljs-params">(angle: <span class="hljs-type">Double</span>, radius: <span class="hljs-type">Double</span>)</span></span> = Point(……)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果一个对象有多个重载的构造函数，它们并非调用不同的超类构造函数，并且不能简化为具有默认参数值的单个构造函数，那么优先用工厂函数取代这些重载的构造函数。</p>
<h3 id="平台类型"><a href="#平台类型" class="headerlink" title="平台类型"></a>平台类型</h3><p>返回平台类型表达式的公有函数&#x2F;方法必须显式声明其 Kotlin 类型：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">apiCall</span><span class="hljs-params">()</span></span>: String = MyJavaApi.getProperty(<span class="hljs-string">&quot;name&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>任何使用平台类型表达式初始化的属性（包级别或类级别）必须显式声明其 Kotlin 类型：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">val</span> name: String = MyJavaApi.getProperty(<span class="hljs-string">&quot;name&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>使用平台类型表达式初始化的局部值可以有也可以没有类型声明：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> name = MyJavaApi.getProperty(<span class="hljs-string">&quot;name&quot;</span>)<br>    println(name)<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="作用域函数-apply-with-run-also-let"><a href="#作用域函数-apply-with-run-also-let" class="headerlink" title="作用域函数 apply&#x2F;with&#x2F;run&#x2F;also&#x2F;let"></a>作用域函数 apply&#x2F;with&#x2F;run&#x2F;also&#x2F;let</h3><p>Kotlin 提供了一系列用来在给定对象上下文中执行代码块的函数：<code>let</code>、 <code>run</code>、 <code>with</code>、 <code>apply</code> 以及 <code>also</code>。 关于不同情况下选择正确作用域函数的准则，请参考<a target="_blank" rel="noopener" href="https://book.kotlincn.net/text/scope-functions.html">作用域函数</a>。</p>
<h2 id="库的编码规范"><a href="#库的编码规范" class="headerlink" title="库的编码规范"></a>库的编码规范</h2><p>在编写库时，建议遵循一组额外的规则以确保 API 的稳定性：</p>
<ul>
<li>总是显式指定成员的可见性（以避免将声明意外暴露为公有 API ）</li>
<li>总是显式指定函数返回类型以及属性类型（以避免当实现改变时意外更改返回类型）</li>
<li>为所有公有成员提供 <a target="_blank" rel="noopener" href="https://book.kotlincn.net/text/kotlin-doc.html">KDoc</a> 注释，不需要任何新文档的覆盖成员除外 （以支持为该库生成文档）</li>
</ul>
<p>在<a target="_blank" rel="noopener" href="https://book.kotlincn.net/text/jvm-api-guidelines-introduction.html">库创建者指南</a>中详细了解为库编写 API 时需要考虑的最佳实践与意见。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Kotlin%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="category-chain-item">Kotlin学习笔记</a>
  
  
    <span>></span>
    
  <a href="/categories/Kotlin%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Kotlin%E5%9F%BA%E7%A1%80/" class="category-chain-item">Kotlin基础</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Kotlin/" class="print-no-link">#Kotlin</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Kotlin编码规范</div>
      <div>http://example.com/2023/10/30/Kotlin03编码规范/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>ssubin</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年10月30日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/11/01/Kotlin04%E7%B1%BB%E5%9E%8B/" title="Kotlin04类型">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Kotlin04类型</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/10/30/Kotlin02%E4%B9%A0%E6%83%AF%E7%94%A8%E6%B3%95/" title="Kotlin习惯用法">
                        <span class="hidden-mobile">Kotlin习惯用法</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"CxAzwCX8p3wID71bmqRMZkW4-gzGzoHsz","appKey":"7oaNRDSXMMvMPwS453YPtfH9","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
